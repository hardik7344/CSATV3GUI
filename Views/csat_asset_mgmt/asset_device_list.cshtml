@using OwnYITCSAT.DataAccessLayer;
@using Microsoft.AspNetCore.Mvc.Rendering;
@using OwnYITCSAT.Controllers;
@{
    ViewData["Title"] = "asset_device_list";
    Layout = "~/Views/Shared/ownyit_main_page.cshtml";
}
<div class="row">
    <div class="headerbar">
        <a href="#">Asset Management</a>
    </div>
</div>

<!--main Content-->
<div class="row" style="margin-top:10px;">

    <!--side menu-->
    <div class="col-sm-2 col-md-2 col-lg-2">
        @{
            @Html.Partial("asset_system_detail_menu");
        }
    </div><!--side menu end-->
    <!--sub content-->
    <div class="col-sm-10 col-md-10 col-lg-10">

        <ul class="breadcrumb">
            <li>
                @Html.ActionLink("Asset Management", "csat_asset_mgmt", "csat_asset_mgmt")
                <i class="icon-angle-right"></i>
            </li>
            <li>Device List</li>
        </ul>


        <!--asset device form-->
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <form class="form-horizontal " role="form" style="padding-left: 22px;">
                    <fieldset>

                        <div class="form-group">
                            <label class="col-sm-1 col-lg-1 col-md-1 control-label" for="expiry-month">Branch/Unit</label>
                            <div class="col-sm-10 col-lg-10 col-md-10">
                                <div class="row">
                                    <div class="col-sm-8 col-lg-9 col-md-8">
                                        @*MD.MobileList = new SelectList(@ViewData["OUList"] , "MobileID", "MobileName");*@
                                        @*<select class="form-control col-sm-7 col-lg-7 col-md-7" name="expiry-month" id="expiry-month">
                                                <option>Root</option>
                                                <option value="01">Root >> Location</option>
                                                <option value="02">Root >> Location >> Department</option>
                                            </select>*@

                                        @*<select class="form-control col-sm-7 col-lg-7 col-md-7" name="drpOU" id="drpOU">*@

                                        <select class="dropdownlist col-sm-7 col-lg-7 col-md-7 form-control" id="DrpOU">
                                            @*<select class="form-control col-sm-7 col-lg-7 col-md-7">*@
                                            <option value="-1">All</option>
                                            @{
                                                if (ViewData["OUList"] != null)
                                                {
                                                    foreach (System.Data.DataRow dr in ((System.Data.DataTable)(ViewData["OUList"])).Rows)
                                                    {

                                                        @*@Html.DropDownListFor(dr["OUID"], dr["OUName"], "ALL", new { Class = "ddlStyle", onchange = "SelectedIndexChanged()" })*@
                                                        <option value="@dr["OUID"]">@dr["OUName"]</option>
                                                       //    var result = new csat_asset_mgmtController().getAllOU(dr["OUID"].ToString());
                                                       
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-inline">

                            <label class="col-sm-1 col-lg-1 col-md-1 control-label">Device</label>
                            <div class="col-sm-3 col-lg-2 col-md-3">
                                <div class="row">
                                    <div class="col-sm-12 col-lg-12 col-md-12">
                                        <select class="form-control col-sm-3 col-lg-12 col-md-3" name="Assset-Device" id="DrpDevice">
                                            <option value="-1">All</option>
                                            @{
                                                if (OwnYITConstant.DT_ASSET_DEVICE_LIST1 != null)
                                                {
                                                    @foreach (System.Data.DataRow dr in (OwnYITConstant.DT_ASSET_DEVICE_LIST1).Rows)
                                                    {
                                                        <option value="@dr["device_id"]">@dr["ActualName"]</option>
                                                        @*<option value="01">Mittal</option>
                                                            <option value="02">sapan</option>*@
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>

                                </div>
                            </div>

                            <label class="col-sm-1 col-lg-1 col-md-1 control-label">IP</label>
                            <div class="col-sm-3 col-lg-2 col-md-3">
                                <div class="row">
                                    <div class="col-sm-12 col-lg-12 col-md-12">
                                        <select class="form-control col-sm-3 col-lg-12 col-md-3" name="Asset-IP" id="DrpIP">
                                            <option value="-1">All</option>
                                            @{
                                                if (OwnYITConstant.DT_ASSET_DEVICE_LIST1 != null)
                                                {
                                                    @foreach (System.Data.DataRow dr in (OwnYITConstant.DT_ASSET_DEVICE_LIST1).Rows)
                                                    {
                                                        <option>@dr["IPAddress"]</option>
                                                        @*<option value="01">Mittal</option>
                                                            <option value="02">sapan</option>*@
                                                    }
                                                }
                                            }

                                        </select>
                                    </div>

                                </div>
                            </div>

                            <label class="col-sm-1 col-lg-1 col-md-1 control-label">Status</label>
                            <div class="col-sm-3 col-lg-2 col-md-3">
                                <div class="row">
                                    <div class="col-sm-12 col-lg-12 col-md-12">
                                        <select class="form-control col-sm-3 col-lg-12 col-md-3" name="Asset-Status" id="DrpStatus">
                                            <option>All</option>
                                            <option value="01">Running</option>
                                            <option value="02">Warning</option>
                                            <option value="03">Present Not Link</option>

                                        </select>
                                    </div>

                                </div>
                            </div>

                            <div class="pull-left">
                                <button type="submit" class="btn btn-default">Refresh</button>
                            </div>

                        </div>

                    </fieldset>
                </form>
            </div>
        </div> <!--asset device form end-->
        <!--asset device Datatable start-->

        <div class="row">

            <div class="col-sm-12 col-md-12 col-lg-12">


                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover table_font asset_device_list" id="asset_device_list">
                        <thead>
                            <tr>
                                @*<th></th>*@
                                <th data-orderable="false">Status</th>
                                <th>Virtual Name</th>
                                <th>Device Name</th>
                                <th>IP Address</th>
                                <th>MAC Address</th>
                                <th>Last Poll Time</th>
                                <th>OU Name</th>
                                @*@if (ViewData["DeviceDataList"] != null)
                                    {
                                        foreach (System.Data.DataColumn col in ((System.Data.DataTable)(ViewData["DeviceDataList"])).Columns)
                                        {

                                            <th>@col</th>
                                        }
                                    }*@

                            </tr>
                        </thead>
                        <tbody>
                            @{
                                if (OwnYITConstant.DT_ASSET_DEVICE_LIST != null)
                                {
                                    foreach (System.Data.DataRow dr in (OwnYITConstant.DT_ASSET_DEVICE_LIST).Rows)
                                    {
                                        <tr class="gradeA">
                                            @*<td><a data-toggle="modal" href="#devicelist"><span class="fa fa-desktop" style="color:gray;"></span></a></td>*@
                                            @*<td>@dr["ImagesStatus"] </td>*@
                                            @*<td><img src="~/images/running.gif" /></td>*@
                                            <td><img src='@Url.Content( "~" + @dr["ImagesStatus"] + "")' /></td>
                                            <td>
                                                <a href="@Url.Action("asset_system_detail", "csat_asset_mgmt")?device_id=@dr["device_id"]">@dr["Virtual_Name"]</a>
                                            </td>
                                            <td>@dr["ActualName"] </td>
                                            <td>@dr["IPAddress"]</td>
                                            <td>@dr["mac"]</td>
                                            <td>@dr["Performance"]</td>
                                            <td>@dr["OUName"] </td>
                                        </tr>
                                    }
                                }
                            }
                            @*<tr class="gradeA">
                                    <td><a data-toggle="modal" href="#devicelist"><span class="fa fa-desktop" style="color:gray;"></span></a></td>
                                    <td>1</td>
                                    <td>@Html.ActionLink("Upendra Patel", "asset_system_detail", "csat_asset_mgmt")</td>
                                    <td>Internet Explorer 7</td>
                                    <td>Win XP SP2+</td>
                                    <td class="center">7</td>
                                    <td class="center">A</td>
                                </tr>
                                <tr class="gradeA">
                                    <td><a data-toggle="modal" href="#devicelist"><span class="fa fa-desktop" style="color:gray;"></span></a></td>
                                    <td>2</td>
                                    <td>Trident</td>
                                    <td>AOL browser (AOL desktop)</td>
                                    <td>Win XP</td>
                                    <td class="center">6</td>
                                    <td class="center">A</td>
                                </tr>*@
                        </tbody>

                    </table>
                </div>

            </div>

        </div> <!--asset device Datatable end-->

    </div> <!--sub content end-->
    &nbsp;
</div> <!--main Content end-->

<script type="text/javascript">
    // $(".dropdownlist").change(function () {
    //   alert(this.value);

    //$.post("/csat_asset_mgmt/GetOUChange",
    //    { OUID: $("#this.value").val() },
    //    function (data) {
    //        //$("#employeeDetailsDiv").html(data)
    //    }

    // });

    //$(document).ready(function () {
    //    $(".dropdownlist").change(function () {
    //        debugger;
    //        //url.action('csat_asset_mgmt', 'GETDEMO')
    //        alert(this.value);
    //        url.action('csat_asset_mgmt', 'GETDEMO');
    //    })
    //})
    $("#DrpOU").change(function () {
        //debugger;
        var url = '@Url.Content("~/csat_asset_mgmt/getAllOU?OUID=")' + this.value;
        $.ajax({
            type: "POST",
            url: url,
            success: function (result) {
                //alert('S');
            }

            })

    });

    $("#DrpDevice").change(function () {
        //debugger;
        var url = '@Url.Content("~/csat_asset_mgmt/GetDataDeviceWise?DeviceID=")' + this.value;
        $.ajax({
            type: "POST",
            url: url,
            success: function (result) {
                //alert('S');
            }

            })

    });
     $("#DrpIP").change(function () {
        //debugger;
        var url = '@Url.Content("~/csat_asset_mgmt/GetDataIPWise?IP=")' + this.value;
        $.ajax({
            type: "POST",
            url: url,
            success: function (result) {
                //alert('S');
            }

            })

    });

    $("#DrpStatus").change(function () {
        //debugger;
        var url = '@Url.Content("~/csat_asset_mgmt/GetDataStatusWise?Status=")' + this.value;
        $.ajax({
            type: "POST",
            url: url,
            success: function (result) {
                //alert('S');
            }

            })

    });


</script>






