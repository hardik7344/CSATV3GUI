
@{
    ViewData["Title"] = "setting_admin_user_mgmt";
    Layout = "~/Views/Shared/ownyit_main_page.cshtml";
}

<script>
    var changepwd = 0;
    $(document).ready(function () {
        $("#change_password").click(function () {
            changepwd = 1;
            $("#change_password_show").toggle();
        });
    });
</script>

<div class="row">
    <div class="headerbar">
        <a href="#" style="padding-left:10px;">Settings</a>
    </div>
</div>
<script src="~/js/jstree.min.js"></script>
<link href="~/css/jsTree/style.css" rel="stylesheet" />
<div class="row row_top_margin">

    <!--side menu-->
    <div class="col-sm-2 col-md-2 col-lg-2 no_padding">
        <div class="ibox float-e-margins ">
            <div class="ibox-content sidemenu">
                @{
                    @Html.Partial("csat_settings_page_menu");
                }
            </div>
        </div>
    </div>
    <!--side menu end-->

    <div class="col-sm-10 col-md-10 col-lg-10">


        <div class="ibox float-e-margins ">
            <div class="ibox-content" style="padding:4px;">
                <ul class="breadcrumb" style="margin-bottom:0px;">
                    <li>
                        @Html.ActionLink("Settings", "setting_scan_ip_range", "csat_settings_page")
                        <i class="icon-angle-right"></i>
                    </li>
                    <li> Admin User Management</li>
                </ul>
            </div>
        </div>

        <div class="ibox float-e-margins" style="margin:0px;">
            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <button type="button" data-toggle="modal" onclick='showaddpopup()' class="btn btn-primary pull-right " style="margin-bottom: 5px;">Add New <b style="font-weight:bolder;">+</b></button>
                        <div class="table-responsive" id="divadminuser">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="space_bottom">&nbsp;</div>
    </div>
</div>


<!--add new admin user form content-->
<div class="modal fade" id="add_admin_user" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="cleardata()">&times;</button>
                <h6 class="modal-title">Add New User </h6>
            </div>
            <div class="modal-body">
                <!--form  content-->
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal" method="post" name="add_user_form">
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">User Role </label>
                                        <div class="col-xs-2">
                                            <div class="radio">
                                                <label> <input type="radio" name="category" id="admin" value="Admin" checked"> Admin </label>
                                            </div>
                                        </div>
                                        <div class="col-xs-2">
                                            <div class="radio">
                                                <label> <input type="radio" name="category" id="engineer" value="Engineer"> Engineer </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Login User</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="login_user" id="loginuserid" class="form-control" placeholder="Enter Login User" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Login ID</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="login_id" id="loginid" class="form-control" placeholder="Enter Login ID" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Password</label>
                                        <div class="col-xs-5">
                                            <input type="password" name="password" id="pwdid" class="form-control" placeholder="Enter Password" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Email ID</label>
                                        <div class="col-xs-5">
                                            <input type="email" name="emailid" id="emailid" class="form-control" placeholder="Enter Email ID" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Contact No.</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="contactno" id="contact" class="form-control" placeholder="Enter Contact No." />
                                        </div>
                                    </div>

                                    <div class="form-group model-button">
                                        <div class="col-xs-7 pull-right ">
                                            <input type="submit" class="btn btn-primary" value="Add User" onclick='AddAdminuser()' name="add user" />
                                            <input type="button" class="btn btn-default" value="Cancel" name="Add cancel1" data-dismiss="modal" onclick="cleardata()"  />
                                        </div>
                                    </div>

                                </form>

                            </div>
                        </div>
                    </div>
                </div>  <!--form  content end-->
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--add new IP Range form content End-->
<!--edit  admin user form content-->
<div class="modal fade" id="edit_admin_user" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h6 class="modal-title">Edit User  Details</h6>
            </div>
            <div class="modal-body">
                <!--form  content-->
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal" method="post">
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">User Role </label>
                                        <div class="col-xs-2">
                                            <div class="radio">
                                                <label> <input type="radio" name="category" id="admin1" value="admin" checked> Admin </label>
                                            </div>
                                        </div>
                                        <div class="col-xs-2">
                                            <div class="radio">
                                                <label> <input type="radio" name="category" id="engineer1" value="engineer"> Engineer </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Login User</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="login_user" id="login_user1" class="form-control" placeholder="Enter Login User" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Login ID</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="login_id" id="login_id1" disabled class="form-control" placeholder="Enter Login ID" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Password</label>
                                        <div class="col-xs-5">
                                            <div id="change_password_show" style="display:none;">
                                                <input type="password" name="password" id="password1" class="form-control" placeholder="Enter Password" />
                                            </div>
                                            <label for="nameField" id="change_password">Change Password ?</label>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Email ID</label>
                                        <div class="col-xs-5">
                                            <input type="email" name="emailid" id="emailid1" class="form-control" placeholder="Enter Email ID" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="nameField" class="col-xs-2">Contact No.</label>
                                        <div class="col-xs-5">
                                            <input type="text" name="contactno" id="contactno1" class="form-control" placeholder="Enter Contact No." />
                                        </div>
                                    </div>

                                    <div class="form-group model-button">
                                        <div class="col-xs-7 pull-right ">
                                            <input type="submit" class="btn btn-primary" value="Edit User" id="idupdate" name="edit user" />
                                            <input type="button" class="btn btn-default" value="Cancel" id="idEditcancel" name="edit cancel"  data-dismiss="modal" />
                                        </div>
                                    </div>

                                </form>

                            </div>
                        </div>
                    </div>
                </div>  <!--form  content end-->
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--edit  admin user form content End-->
<!--    Apply User Rights  model box Content-->

<div class="modal fade" id="set_user_right" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog  modal-md" style="margin-top: 82px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h6 class=" modal-title">
                    Apply User Rights
                </h6>

            </div>
            <div class="modal-body model_body_scroll">
                <div class="row well">
                    <form class="form-horizontal" method="post" name="add_user_form">
                        <div class=" col-sm-12 col-md-12 col-lg-12" id="divadminuserrights">
                            @*<div class="form-group">
                                <label for="nameField" class="col-xs-12">Login User : Upendra-PC</label>
                            </div>*@
                        </div>
                      

                        <div class="form-group model-button">
                            <div class="col-xs-7 pull-right ">
                                <input type="button" class="btn btn-primary" value="Apply" name="apply" onclick="SaveUserrights()" />
                                <input type="button" class="btn btn-default" value="Cancel" name="cancel" data-dismiss="modal"  />
                            </div>
                        </div>
                    </form>
                    @*<form class="form-horizontal" method="post" name="add_user_form">
            <div class=" col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                    <label for="nameField" class="col-xs-12">Login User : Upendra-PC</label>
                </div>
            </div>
            <div class=" col-sm-12 col-md-12 col-lg-12">
                <div id="jstree-tree"></div>
            </div>
            <div class="form-group model-button">
                <div class="col-xs-7 pull-right ">
                    <input type="button" class="btn btn-primary" value="Apply" name="apply" />
                    <input type="button" class="btn btn-default" value="Cancel" name="cancel" />
                </div>
            </div>
        </form>*@
                </div>

            </div>


        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<!-- End    Apply User Rights model box Content -->
<!--delete_admin_user  model  content-->

<div class="modal fade" id="delete_admin_user" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog  modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h6 class=" modal-title">
                    Conformation
                </h6>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-10">
                        <form class="form-horizontal" method="post">
                            <div class="form-group">

                                <label for="nameField" class="col-xs-12">
                                    <i class="glyphicon glyphicon-exclamation-sign delete_msg" ></i>
                                    <span style="font-weight:normal;margin-left:30px;">Are you sure you want to delete this record?</span>
                                </label>

                            </div>
                            <div class="form-group">
                                <label for="nameField" class="col-xs-4"></label>
                                <div class="col-xs-6">
                                    <input type="button" class="btn btn-primary" name="yes" value="Yes" id="btndelete" />
                                    <input type="button" class="btn btn-default" name="no" value="No" id="btndeletecancle" data-dismiss="modal"  />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<!--delete_admin_user device model  content-->
<script type="text/javascript">
    $(document).ready(function () {
        var jsonData = [
            {
                id: 1,
                text: "Dashboard",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },

            },
            {
                id: 2,
                text: "Asset Mgmt",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },
                children: [
                    {
                        id: 3,
                        text: "System List",
                        state: {
                            selected: false
                        },
                        children: [
                            {
                                id: 4,
                                text: "Send Message",
                                state: {
                                    selected: false
                                },
                            },
                            {
                                id: 5,
                                text: "Execute Command",
                                state: {
                                    selected: false
                                },

                            },
                            {
                                id: 6,
                                text: "Manage System",
                                state: {
                                    selected: false
                                },

                            },
                            {
                                id: 7,
                                text: "Fetch All Data",
                                state: {
                                    selected: false
                                },

                            },
                            {
                                id: 8,
                                text: "Clean Temp Files",
                                state: {
                                    selected: false
                                },

                            },
                        ]
                    },
                    {
                        id: 9,
                        text: "Hardware Master",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 10,
                        text: "Software Master",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 11,
                        text: "Vendor Master",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    }
                ]

            },
            {
                id: 12,
                text: "Policy Management",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },
                children: [
                    {
                        id: 13,
                        text: "Policy Dashboard",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 14,
                        text: "Create Policy ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },

                ]

            },
            {
                id: 15,
                text: "Settings",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },
                children: [
                    {
                        id: 16,
                        text: "Organization Structure Mgmt",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 17,
                        text: "Scan IP Range ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 18,
                        text: " Admin User Management",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                ]
            },
            {
                id: 19,
                text: "Audit Report ",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },

            },
            {
                id: 20,
                text: "Report ",
                a_attr: { href: '#' },
                state: {
                    selected: false
                },
                children: [
                    {
                        id: 21,
                        text: " Agent Information Report ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 22,
                        text: "Data Leakage Report  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 23,
                        text: " Modem Usage Report ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 24,
                        text: " Audit Trail Summary  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 25,
                        text: " Asset Information Report  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 26,
                        text: " System Firewall Status  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 27,
                        text: "Software Information Report  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 28,
                        text: " User Information Report  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 29,
                        text: " Shared Resources Information Report ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },

                    {
                        id: 30,
                        text: " Services Details Report   ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },

                    {
                        id: 31,
                        text: "  Port Information Report   ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },

                    {
                        id: 32,
                        text: " Users Login-Logoff Time Track Report  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },


                    {
                        id: 33,
                        text: "  Password Change Details  ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },

                    {
                        id: 34,
                        text: " DCM Report   ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                    {
                        id: 35,
                        text: "  Network Statistics Details Report    ",
                        a_attr: { href: '#' },
                        state: {
                            selected: false
                        },
                    },
                ]
            },
        ];

        $('#jstree-tree')

            .jstree({
                core: {

                    data: jsonData,
                    check_callback: true
                },
                checkbox: {
                    //three_state: false,
                    keep_selected_style: false,
                    icon: "glyphicon glyphicon-ok",
                    cascade: 'down'
                },
                plugins: ["checkbox", "dnd"],



            });




    });

</script>

<script>
     $.get(null, null, showadminuser);
    function showadminuser() {
        $.ajax({
            type: "POST",
            url: '@Url.Content("~/csat_settings_page/Showadminuser")',
            success: function (data) {
                //debugger;
                var Setgriddata = $('#divadminuser');
                jQuery('#divadminuser').html('');
                var headdata = "<table class='table table-striped table-bordered admin_user_datatable' id='admin_user_datatable' style='width:100%'><thead><tr><th class='col-sm - 2'>Login User</th><th class='col-sm-1'>Login ID</th><th class='col-sm-2'>User Type</th><th class='col-sm-2'>Email ID</th>" +
                    "<th class='col-sm-2'>Contact No.</th><th class='icon' data-orderable='false'> Edit</th><th class='icon' data-orderable='false'> Rights</th><th class='icon' data-orderable='false'> Delete</th></tr></thead><tbody>";
                var trdata = "";
                for (var i = 0; i < data.adminuserinfo.length; i++) {

                    trdata += "<tr><td class='col-sm-2'>" + data.adminuserinfo[i].user_name + "</td>";
                    trdata += "<td class='col-sm-2'>" + data.adminuserinfo[i].login_id + "</td>";
                    trdata += "<td class='col-sm-2'>" + data.adminuserinfo[i].user_type + "</td>";
                    trdata += "<td class='col-sm-2'>" + data.adminuserinfo[i].emailid + "</td>";
                    trdata += "<td class='col-sm-2'>" + data.adminuserinfo[i].contact_no + "</td>";
                    trdata += "<td class='icon'><i class=' glyphicon glyphicon-pencil manage_icon ' type='button' data-toggle='modal' onclick='editadminuserdata(" + data.adminuserinfo[i].user_id +")' title='Edit'></i></td>";
                    if ((data.adminuserinfo[i].login_id).toUpperCase() == 'ADMIN') {
                        trdata += "<td class='icon'></td>";
                        trdata += "<td class='icon'></td>";
                    }
                    else {
                        trdata += "<td class='icon'><i class='manage_icon ' type='button' data-toggle='modal'  title='Setting'> <img src='@Url.Content("~/images/user_right.png")' onclick=showuserrights(" + data.adminuserinfo[i].user_id + ",'" + encodeURIComponent(data.adminuserinfo[i].user_name) + "') /></i>&nbsp;</td>";
                        trdata += "<td class='icon'><i class=' glyphicon glyphicon-trash manage_icon ' type='button' data-toggle='modal'  title='Delete' onclick='deleteadminuserdata(" + data.adminuserinfo[i].user_id +")'></i>&nbsp;  </td></tr>";
                    }
                }
                Setgriddata.append(headdata + trdata + "</tbody></table>");
                $(document).ready(function () {
                    $('#admin_user_datatable').DataTable({
                        paging: true,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
                }
        });
    }

    // Add Admin user
    var userrole = '';
    $('input[type=radio][name=category]').change(function () {
       // debugger;
        userrole = this.value;

    });
    function showaddpopup() {
        $("#add_admin_user").modal('show');
        document.getElementById("admin").checked = true;

    }

    function AddAdminuser() {

        var userrole = $('input[name=category]:checked').val();
        var loginuser = document.getElementById("loginuserid").value;
        var loginid = document.getElementById("loginid").value;
        var passwd = document.getElementById("pwdid").value;
        var email = document.getElementById("emailid").value;
        var contactno = document.getElementById("contact").value;

        $.ajax({
            type: "POST",
            url: '@Url.Content("~/csat_settings_page/Addadminuser?userrole=")' + userrole + "&loginuser=" + loginuser + "&loginid=" + loginid + "&passwd=" + passwd + "&emailid=" + email + "&contact=" + contactno,
            success: function (result) {
                alert(result);
            }
        });
    }

    // Delete Admin user
    var userid = "";
    function deleteadminuserdata(user_id) {
        userid = user_id;
        $("#delete_admin_user").modal('show');
    }

     $('#btndelete').on('click',function(){
         var url1 = '@Url.Content("~/csat_settings_page/deleteAdminuser?userid=")' + userid;
	 $.ajax({
            type: "POST",
            url:url1,
            success: function (result) {
			alert(result);
                $('#delete_admin_user').modal('hide');
                showadminuser();
			}
			});

	});
	$('#btndeletecancle').on('click',function(){
        $('#delete_admin_user').modal('hide');
    });

    // Edit Admin user
    var admineditid = "";
    var pwd = "";
    function editadminuserdata(user_id) {
        admineditid = user_id;
        var url1 = '@Url.Content("~/csat_settings_page/GetAdminuserdetail?admineditid=")' + admineditid;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
              //  debugger;
                if (data.adminuserdata[0].user_type == 'Admin')
                    document.getElementById("admin1").checked = true;
                    else
                    document.getElementById("engineer1").checked = true;
                document.getElementById("login_user1").value = data.adminuserdata[0].user_name;
                document.getElementById("login_id1").value = data.adminuserdata[0].login_id;
             //  pwd = data.adminuserdata[0].user_password;
                document.getElementById("emailid1").value = data.adminuserdata[0].emailid;
                document.getElementById("contactno1").value = data.adminuserdata[0].contact_no;
                $('#edit_admin_user').modal('show');

            }
        });
    }

    $('#idEditcancel').on('click', function () {
        $('#edit_admin_user').modal('hide');
    });
    $('#idupdate').on('click', function () {
        var usertype = "";
        var loginuser = "";
        var loginid = "";
        var emailid = "";
        var contactno = "";
        var pwd1 = "";
        if (document.getElementById('admin1').checked)
            usertype = "Admin";
        else
            usertype = "Engineer";
        loginuser = document.getElementById("login_user1").value;
        //loginid = document.getElementById("login_id1").value;
        emailid = document.getElementById("emailid1").value;
        if (changepwd == 1) {
            pwd1 = document.getElementById("password1").value;
        }
        contactno = document.getElementById("contactno1").value;
        var url = '@Url.Content("~/csat_settings_page/UpdateAdminuserdetail?userid=")' + admineditid + '&usertype=' + usertype + '&loginuser=' + loginuser +  '&pwd=' + pwd1 + '&chngepwd=' + changepwd + '&emailid=' + emailid + '&contact=' + contactno;
        $.ajax({
            type: "POST",
            url: url,
            success: function (result) {
               // debugger;
                alert(result);
                if (result == "Please enter Details.")
                    $('#edit_admin_user').modal('show');
                else {
                    $('#edit_admin_user').modal('hide');
                    showadminuser();
                }
			}

			});
    });

    // Show user rights

    
    var userid = "";
    var username = "";
    function showuserrights(user_id,user_name) {
        userid = user_id;
        username = decodeURIComponent(user_name);
        $("#set_user_right").modal('show');
        $.ajax({
            type: "POST",
            url: '@Url.Content("~/csat_settings_page/ShowMenuList?userid=")' + user_id,
            success: function (data) {
            //    debugger;
                var Setgriddata = $('#divadminuserrights');
                jQuery('#divadminuserrights').html('');
                var headdata = "<div class=' col-sm-12 col-md-12 col-lg-12'><div class='form-group'><label for='nameField' class='col-xs-12'>Login User : " + user_name + "</label></div>";
                var trdata = "";
                for (var i = 0; i < data.menulist.length; i++) {
                //    GetMenuRights(data.menulist[i].menu_id);
                    trdata += "  <div class='form-group'> <div class='radio'><label>";
                    if (data.menulist[i].rights == '1')
                        trdata += " <input type='checkbox' name='Dashboard' checked  id=" + data.menulist[i].menu_id + " value=" + data.menulist[i].menu_id + " onchange='GetCheckmenu(" + user_id + ")' style='margin-right:5px;'>" + data.menulist[i].menu_name + "</label></div> </div> ";
                    else
                        trdata += " <input type='checkbox' name='Dashboard'   id=" + data.menulist[i].menu_id + " value=" + data.menulist[i].menu_id + " onchange='GetCheckmenu(" + user_id + ")' style='margin-right:5px;'>" + data.menulist[i].menu_name + "</label></div> </div> ";
                }
                Setgriddata.append(headdata + trdata + "</div >");
            }
        });
    }
    
    var menuid = "";
    var userid = "";
    function GetCheckmenu(user_id) {
        menuid = "";
        menuuncheckid = "";
        userid = user_id;
        var checkboxes = document.querySelectorAll('input[name="Dashboard"]');
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked == true) {
             //   debugger;
                menuid += ","  + checkboxes[i].value;
              // 
            }
            else {
                menuuncheckid += "," + checkboxes[i].value;
            }

        }
    }
    function SaveUserrights() {
        InsertUserRights(userid, menuid, menuuncheckid);
    }

    function InsertUserRights(user_id, menuid, menuuncheckid) {
        $.ajax({
            type: "POST",
            url: '@Url.Content("~/csat_settings_page/AddUserRights?userid=")' + user_id + "&menuid=" + menuid + "&menuuncheckid=" + menuuncheckid,
            success: function (result) {
                alert(result);
                $("#set_user_right").modal('hide');

            }
        });

    }

    function cleardata() {
        document.getElementById("loginuserid").value = "";
        document.getElementById("loginid").value = "";
        document.getElementById("pwdid").value = "";
        document.getElementById("emailid").value = "";
        document.getElementById("contact").value = "";
    }
    
</script>
