

@{
    ViewData["Title"] = "setting_event_monitoring";
    Layout = "~/Views/Shared/ownyit_main_page.cshtml";
}
<script src="~/js/main.js"></script>
<script type="text/javascript">

    var now = new Date();
    var day = ("0" + now.getDate()).slice(-2);
    var month = ("0" + (now.getMonth() + 1)).slice(-2);
    var today = now.getFullYear() + "-" + (month) + "-" + (day);

    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
            && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>
@*<div class="row">
    <div class="headerbar">
        <a href="#" style="padding-left:10px;">Settings</a>
    </div>
</div>*@

<div class="row row_top_margin">
    <div class="col-sm-12 col-md-12 col-lg-12">
        <div class="ibox float-e-margins ">
            <div class="ibox-content" style="padding:4px;">
                <ul class="breadcrumb" style="margin-bottom:0px;">
                    <li>
                        @Html.ActionLink("Settings", "setting_scan_ip_range", "csat_settings_page")
                        <i class="icon-angle-right"></i>
                    </li>
                    <li> Event Monitoring </li>
                </ul>
            </div>
        </div>
    </div>
        <!--side menu-->
        <div class="col-sm-2 col-md-2 col-lg-2 no_padding">
            <div class="ibox float-e-margins ">
                <div class="ibox-content sidemenu">
                    @{
                        @Html.Partial("csat_settings_page_menu");
                    }
                </div>
            </div>
        </div>
        <!--side menu end-->
        <div class="col-sm-10 col-md-10 col-lg-10">
            <div class="ibox float-e-margins ">
                <div class="ibox-content" style="padding:4px;">
                    <ul class="breadcrumb" style="margin-bottom:0px;">
                        <li>
                            @Html.ActionLink("Settings", "setting_organization_structure", "csat_settings_page")
                            <i class="icon-angle-right"></i>
                        </li>
                        <li> Event Monitoring </li>
                    </ul>
                </div>
            </div>

            <div class="ibox float-e-margins" style="margin:0px;">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <button class=" pull-right btn btn-primary btn-md day" data-toggle="modal" title="Apply Event" style="margin-bottom:5px;padding:0px 4px;" onclick="open_multiple_event_apply()">Apply<b style="font-weight:bolder;">+</b></button>
                            <button class=" pull-right btn btn-primary btn-md day" data-toggle="modal" data-target="#add_event" title="Add Event" style="margin-bottom:5px;padding:0px 4px;">Add Event<b style="font-weight:bolder;">+</b></button>
                            <div class="table-responsive" id="div_event_main_data">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="space_bottom">&nbsp;</div>
        </div>
</div>

    <!--Add New event model box  Content-->

    <div class="modal fade" id="add_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-small">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Add New Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-xs-12">
                            <form class="form-horizontal" method="post">
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event Type</label>
                                    <div class="col-xs-8">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="Type" id="drp_event_type_new">
                                            <option value="1">Application</option>
                                            <option value="2">Security</option>
                                            <option value="3">System</option>
                                            <option value="4">Setup</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event ID</label>
                                    <div class="col-xs-8">
                                        <input class="form-control" type="text" name="Event ID" placeholder="Enter Event ID" onkeypress="return isNumberKey(event)" maxlength="6" id="txt_event_id_new" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event Description</label>
                                    <div class="col-xs-8">
                                        <textarea class="form-control" placeholder="Enter Event Description" style="resize:none;" id="txt_event_desc_new"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4"></label>
                                    <div class="col-xs-6">
                                        <input type="button" class="btn btn-primary" name="save" value="Create Event" onclick="addnewevent();" />
                                        <input type="button" class="btn btn-primary" name="cancel" value="Cancel" data-dismiss="modal" onclick="cleardata()" />
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!-- End  New event  pop-up model box Content end-->
    <!--Edit event model box  Content-->

    <div class="modal fade" id="edit_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-small">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Edit Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-xs-12">
                            <form class="form-horizontal" method="post">
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event Type</label>
                                    <div class="col-xs-8">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="Type" id="drp_event_type_edit" disabled="disabled">
                                            <option value="1">Application</option>
                                            <option value="2">Security</option>
                                            <option value="3">System</option>
                                            <option value="4">Setup</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event ID</label>
                                    <div class="col-xs-8">
                                        <input class="form-control" type="text" name="Event ID" placeholder="Enter Event ID" disabled="disabled" onkeypress="return isNumberKey(event)" maxlength="6" value="1006" id="txt_event_id_edit" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4">Event Description</label>
                                    <div class="col-xs-8">
                                        <textarea class="form-control" placeholder="Enter Event Description" style="resize:none;" id="txt_event_desc_edit">OS Error Report</textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4"></label>
                                    <div class="col-xs-6">
                                        <input type="hidden" id="hdn_event_id_edit" />
                                        <input type="button" class="btn btn-primary" name="save" value="Edit Event" onclick="save_edit_event()" />
                                        <input type="button" class="btn btn-primary" name="cancel" value="Cancel" data-dismiss="modal" />
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!-- End  Edit Event pop-up model box Content end-->
    <!--Apply on event start -->
    <div class="modal fade" id="apply_on_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-md" style="margin-top: 82px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Apply on Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_apply_on">

                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--Apply on Event  end-->
    <!--Apply success Event start -->
    <div class="modal fade" id="apply_success_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-md" style="margin-top: 82px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Apply Successfully Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_apply_success">

                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--Apply success event  end-->
    <!--Apply Event Start-->
    <div class="modal fade" id="apply_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-lg" style="margin-top: 82px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Apply Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_event_data_single">

                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="hdn_rule_id_single_apply" />
                    &nbsp;  &nbsp;
                    <div class="row">
                        <div class="col-xs-12">
                            <form class="form-horizontal" method="post">
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-1 form_label">Branch/ Unit</label>
                                    <div class="col-xs-4" id="div_event_single_ou">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="Branch/Unit" id="drp_OU_single_apply"></select>
                                    </div>
                                    <label for="nameField" class="col-xs-1">System Name</label>
                                    <div class="col-xs-2" id="div_event_single_device">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="System" id="drp_system_single_apply"></select>
                                    </div>

                                    <label for="nameField" class="col-xs-1 text-align-right">IP Address</label>
                                    <div class="col-xs-2" id="div_event_single_ip">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="ip" id="drp_ip_single_apply"></select>
                                    </div>
                                    <div class="pull-left col-xs-1">
                                        <input type="button" class="btn btn-primary" value="Show" onclick="bind_device_single_apply()">
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_single_device_data_grid">

                            </div>
                        </div>
                        <div class="col-xs-12 pull-right ">
                            <input type="button" class="btn btn-primary" value="Apply" name="submit" onclick="apply_single_rule_submit()" />
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--Apply Event  End-->
    <!--Apply multiple Event Start-->
    <div class="modal fade" id="apply_multiple_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-lg" style="margin-top: 82px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Apply Event
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_event_multiple_apply">

                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="hdn_rule_id_multiple_apply" />
                    &nbsp;  &nbsp;
                    <div class="row">
                        <div class="col-xs-12">
                            <form class="form-horizontal" method="post">
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-1 form_label">Branch/ Unit</label>
                                    <div class="col-xs-4">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="Branch/Unit" id="drp_OU_multiple_apply"></select>
                                    </div>
                                    <label for="nameField" class="col-xs-1">System Name</label>
                                    <div class="col-xs-2">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="System" id="drp_system_multiple_apply"></select>
                                    </div>

                                    <label for="nameField" class="col-xs-1 text-align-right">IP Address</label>
                                    <div class="col-xs-2">
                                        <select class="form-control col-sm-3 col-lg-3 col-md-3" name="ip" id="drp_ip_multiple_apply"></select>
                                    </div>
                                    <div class="pull-left col-xs-1">
                                        <input type="button" class="btn btn-primary" value="Show" onclick="bind_device_multiple_apply()">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="table-responsive" id="div_multiple_device_data_grid">

                            </div>
                        </div>
                        <div class="col-xs-12 pull-right ">
                            <input type="button" class="btn btn-primary" value="Apply" name="submit" onclick="apply_multiple_rule_submit()" />
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--Apply  multiple Event  End-->
    <!--delete_event  model  content-->

    <div class="modal fade" id="delete_event" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog  modal-small">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h6 class=" modal-title">
                        Conformation
                    </h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-xs-10">
                            <form class="form-horizontal" method="post">
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-12">
                                        <i class="glyphicon glyphicon-exclamation-sign delete_msg"></i>
                                        <span style="font-weight:normal;margin-left:30px;">Are you sure you want to delete this event?</span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="nameField" class="col-xs-4"></label>
                                    <input type="hidden" id="hdn_task_id_delete" />
                                    <div class="col-xs-6">
                                        <input type="button" class="btn btn-primary" name="yes" value="Yes" onclick="delete_event_id_conf()" />
                                        <input type="button" class="btn btn-default" name="no" value="No" onclick="hide_delete_event_popup()" data-dismiss="modal" />
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!--delete_event device model  content-->

    <script>

    $(".parent").each(function (index) {
        var group = $(this).data("group");
        var parent = $(this);

        parent.change(function () {  //"select all" change
            $(group).prop('checked', parent.prop("checked"));
        });
        $(group).change(function () {
            parent.prop('checked', false);
            if ($(group + ':checked').length == $(group).length) {
                parent.prop('checked', true);
            }
        });
    });
    $.get(null, null, DataBind);

    function DataBind() {
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_monitoring_data/")';
        //debugger;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDataDiv = $('#div_event_main_data');
                jQuery('#div_event_main_data').html('');
                var SetEventData = "<table class='table table-striped table-bordered event_datatable_data' style='width:100%'><thead><tr><th class='select' data-orderable='false'><input type='checkbox' id='chk_event_parent' class='parent' data-group='.group1' onclick='checkallitems(this,this.id)'  /></th><th class='col-sm-2'>Event Type</th><th class='col-sm-1'>Event ID</th><th class='col-sm-3'>Event Description</th><th class='col-sm-1'>Apply on</th><th class='col-sm-2'>Applied successfully</th><th class='icon' data-orderable='false'>Apply</th><th class='icon' data-orderable='false'>Edit</th><th class='icon' data-orderable='false'>Delete</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_data.length; i++) {
                    SetEventData += "<tr>";
                    SetEventData += "<td class='select'><input type='checkbox' class='group1' name='check[]' id='chk_event_parent' value='" + data.csat_event_data[i].rule_id+"'/></td>";
                    SetEventData += "<td class='col-sm-2'>" + data.csat_event_data[i].event_type +"</td>";
                    SetEventData += "<td class='col-sm-1'>" + data.csat_event_data[i].event_id +"</td>";
                    SetEventData += "<td class='col-sm-3'>" + data.csat_event_data[i].event_desc + "</td>";
                    SetEventData += "<td class='col-sm-1 icon'><a href='' data-toggle='modal'  onclick='open_apply_on(" + data.csat_event_data[i].rule_id + ")'>" + data.csat_event_data[i].applyon + "</a></td>";
                    SetEventData += "<td class='col-sm-2 icon'><a href='' data-toggle='modal'  onclick='open_apply_success(" + data.csat_event_data[i].rule_id + ")'>" + data.csat_event_data[i].applysuccess + "</a></td>";
                    SetEventData += "<td class='icon'><i class='manage_icon ' type='button' data-toggle='modal' data-target='#apply_event' title='Apply Event'><img src='../images/user_right.png' onclick='open_single_apply(" + data.csat_event_data[i].rule_id +")' /></i>&nbsp;</td>";
                    SetEventData += "<td class='icon'><i class=' glyphicon glyphicon-pencil manage_icon ' type='button' data-toggle='modal' data-target='#edit_event' title='Edit' onclick='EditEvent(" + data.csat_event_data[i].rule_id +")'></i></td>";
                    SetEventData += "<td class='icon'><i class=' glyphicon glyphicon-trash manage_icon ' type='button' data-toggle='modal' data-target='#delete_event' title='Delete' onclick='delete_event_id(" + data.csat_event_data[i].rule_id +")'></i>&nbsp;</td>";
                    SetEventData += "</tr >";
                }
                SetEventData += "</tbody></table>";
                $(document).ready(function () {
                    $('.event_datatable_data').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,

                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });

                });
                SetEventDataDiv.append(SetEventData);
            }
        });
    }
    function addnewevent() {
        var eventType = document.getElementById("drp_event_type_new").value;
        var eventID = document.getElementById("txt_event_id_new").value;
        var eventDesc = document.getElementById("txt_event_desc_new").value;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_monitoring_new?event_type=")' + eventType + '&event_id=' + eventID + '&event_desc=' + eventDesc;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                alert(data);
                DataBind();
                $('#add_event').modal('hide');
            }
        });
    }
    function EditEvent(rule_id) {
        $('#edit_event').modal('show');
        document.getElementById("hdn_event_id_edit").value = rule_id;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_edit_event_data?rule_id=")' + rule_id;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                if (data.csat_event_edit_data.length > 0) {
                    document.getElementById("drp_event_type_edit").value = data.csat_event_edit_data[0].e124type;
                    document.getElementById("txt_event_id_edit").value = data.csat_event_edit_data[0].e124eventid;
                    document.getElementById("txt_event_desc_edit").value = data.csat_event_edit_data[0].e124description;
                }
            }
        });
    }
    function delete_event_id(rule_id) {
        $('#delete_event').modal('show');
        //alert(rule_id);
        document.getElementById("hdn_task_id_delete").value = rule_id;
    }
    function hide_delete_event_popup() {
        $('#delete_event').modal('hide');
        document.getElementById("hdn_task_id_delete").value = "";
    }

    function delete_event_id_conf() {
        $('#delete_event').modal('hide');
        var rule_id = document.getElementById("hdn_task_id_delete").value;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_delete_event?rule_id=")' + rule_id;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                alert(data);
                DataBind();
            }
        });
    }

    function save_edit_event() {
        var rule_id = document.getElementById("hdn_event_id_edit").value;
        var rule_desc = document.getElementById("txt_event_desc_edit").value;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_save_event?rule_id=")' + rule_id + '&event_desc=' + rule_desc;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                alert(data);
                DataBind();
            }
        });
        $('#edit_event').modal('hide');
    }
    function open_single_apply(rule_id) {
       // debugger;
        document.getElementById("hdn_rule_id_single_apply").value = rule_id;
        $('#apply_event').modal('show');
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_single_apply_data?rule_id=")' + rule_id;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDataDiv = $('#div_event_data_single');
                jQuery('#div_event_data_single').html('');
                var SetEventData = "<table class='table table-striped table-bordered event_datatable_data_single_apply' style='width:100%'><thead><tr><th class='col-sm-3' data-orderable='false'>Event Type</th><th class='col-sm-4' data-orderable='false'>Event ID</th><th class='col-sm-4' data-orderable='false'>Event Description</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_single_data.length; i++) {
                    SetEventData += "<tr>";
                    SetEventData += "<td class='col-sm-3'>" + data.csat_event_single_data[i].e124type +"</td>";
                    SetEventData += "<td class='col-sm-4'>" + data.csat_event_single_data[i].e124eventid +"</td>";
                    SetEventData += "<td class='col-sm-4'>" + data.csat_event_single_data[i].e124description + "</td>";
                    SetEventData += "</tr >";
                }
                SetEventData += "</tbody></table>";
                $(document).ready(function () {
                    $('.event_datatable_data_single_apply').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,

                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });

                });
                SetEventDataDiv.append(SetEventData);

                var SetEventOUDataDiv = $('#drp_OU_single_apply');
                jQuery('#drp_OU_single_apply').html('');
                //var SetEventOUData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='Branch / Unit' id='drpOUsingleapply'>";
                var SetEventOUData = "";
                for (var i = 0; i < data.csat_event_single_oudata.length; i++) {
                    SetEventOUData += "<option value='" + data.csat_event_single_oudata[i].ouid + "'>" + data.csat_event_single_oudata[i].ouname + "</option>";
                }
                //SetEventOUData += "</select>";
                SetEventOUDataDiv.append(SetEventOUData);


                var SetEventDeviceDataDiv = $('#drp_system_single_apply');
                jQuery('#drp_system_single_apply').html('');
                var SetEventIPDataDiv = $('#drp_ip_single_apply');
                jQuery('#drp_ip_single_apply').html('');
                var SetEventDeviceDataGrid = $('#div_single_device_data_grid');
                jQuery('#div_single_device_data_grid').html('');
                var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable_single_device_grid' style='width:100%' id='div_single_device_data_grid'><thead><tr><th class='select' data-orderable='false'><input type='checkbox' class='parent' data-group='.group2' id='chk_device_single_apply' onclick='checkallitems(this,this.id)' /></th><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";

                //var SetEventDeviceData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='System' id='drp_system_single_apply'><option value='0'>Select System</option>";
                var SetEventDeviceData = "<option value='-1'>Select System Name</option>";
                //var SetEventIPData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='ip' id='drp_ip_single_apply'><option value='0'>Select IP</option>";
                var SetEventIPData = "<option value='-1'>Select IP Address</option>";
                for (var i = 0; i < data.csat_event_single_device_data.length; i++) {
                    SetEventDeviceData += "<option value='" + data.csat_event_single_device_data[i].device_name + "'>" + data.csat_event_single_device_data[i].device_name + "</option>";
                    SetEventIPData += "<option value='" + data.csat_event_single_device_data[i].ip + "'>" + data.csat_event_single_device_data[i].ip + "</option>";
                    EventDeviceDataGrid += "<tr>";
                    if (data.csat_event_single_device_data[i].e125device_id=="0")
                        EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' id='chk_device_single_apply' value='" + data.csat_event_single_device_data[i].device_id + "' /></td>";
                    else
                        EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' checked='checked' id='chk_device_single_apply' value='" + data.csat_event_single_device_data[i].device_id + "' /></td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_single_device_data[i].ou_longname + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_single_device_data[i].device_name + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_single_device_data[i].ip + "</td>";
                    EventDeviceDataGrid += "</tr>";
                }
                //SetEventDeviceData += "</select>";
                //SetEventIPData += "</select>";
                SetEventDeviceDataDiv.append(SetEventDeviceData);
                SetEventIPDataDiv.append(SetEventIPData);
                EventDeviceDataGrid += "</tbody></table>";
                $(document).ready(function () {
                    $('.event_apply_datatable_single_device_grid').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
                SetEventDeviceDataGrid.append(EventDeviceDataGrid);
            }
        });
    }
    $("#drp_OU_single_apply").change(function () {
        ouidvalue = this.value;
        var url = '@Url.Content("~/csat_report/Get_syatemname_ip?ouid=")' + this.value;
        $.ajax({
        type: "POST",
        url: url,
        success: function (data) {
            var SetDatadevice = $('#drp_system_single_apply');
            var SetDataip = $('#drp_ip_single_apply');

            jQuery('#drp_system_single_apply').html('');
            jQuery('#drp_ip_single_apply').html('');

            var devicedata = "<option value='-1'>Select System Name</option>";
            var ipdata = "<option value='-1'>Select IP Address</option>";

            for (var i = 0; i < data.systemip.length; i++) {
                devicedata+="<option value='"+ data.systemip[i].device_name +"'>"+ data.systemip[i].device_name +"</option>";
                ipdata+="<option value='"+ data.systemip[i].ip +"'>"+ data.systemip[i].ip +"</option>";
            }
            SetDatadevice.append(devicedata);
            SetDataip.append(ipdata);
            }
        });
    });
    function bind_device_single_apply() {
        //debugger;
        var rule_id = document.getElementById("hdn_rule_id_single_apply").value;
        var ou_id = document.getElementById("drp_OU_single_apply").value;
        var device_name = document.getElementById("drp_system_single_apply").value;
        var ip = document.getElementById("drp_ip_single_apply").value;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_single_apply_data_search?rule_id=")' + rule_id + '&ou_id=' + ou_id + '&device_name=' + device_name + '&ip=' + ip;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDeviceDataGrid = $('#div_single_device_data_grid');
                jQuery('#div_single_device_data_grid').html('');
                var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable_single_device_grid' style='width:100%' id='div_single_device_data_grid'><thead><tr><th class='select' data-orderable='false'><input type='checkbox' class='parent' data-group='.group2' id='chk_device_single_apply' /></th><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_single_device_data.length; i++) {
                    EventDeviceDataGrid += "<tr>";
                    if (data.csat_event_single_device_data[i].e125device_id == "0")
                        EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' id='chk_device_single_apply' value='" + data.csat_event_single_device_data[i].device_id + "' /></td>";
                    else
                        EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' checked='checked' id='chk_device_single_apply' value='" + data.csat_event_single_device_data[i].device_id + "' /></td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_single_device_data[i].ou_longname + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_single_device_data[i].device_name + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_single_device_data[i].ip + "</td>";
                    EventDeviceDataGrid += "</tr>";
                }
                EventDeviceDataGrid += "</tbody></table>";
                SetEventDeviceDataGrid.append(EventDeviceDataGrid);
                $(document).ready(function () {
                    $('.event_apply_datatable_single_device_grid').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
            }
        });
    }
    var singledeviceids = "";
    function getcheckeddevice() {
        //debugger;
        singledeviceids = "";
        var checkboxes = document.querySelectorAll('input[id="chk_device_single_apply"]');
        for (var i = 1; i < checkboxes.length; i++) {
            if (checkboxes[i].checked == true) {
                singledeviceids += "," + checkboxes[i].value;
            }
            else {
            }
        }
    }
    var multipledeviceids = "";
    function getcheckeddevicemultiple() {
        //debugger;
        multipledeviceids = "";
        var checkboxes = document.querySelectorAll('input[id="chk_device_multiple_apply"]');
        for (var i = 1; i < checkboxes.length; i++) {
            if (checkboxes[i].checked == true) {
                multipledeviceids += "," + checkboxes[i].value;
            }
            else {
            }
        }
    }
    var event_rules_id = "";
    function getcheckedrulesid() {
        //debugger;
        event_rules_id = "";
        var checkboxes = document.querySelectorAll('input[id="chk_event_parent"]');
        for (var i = 1; i < checkboxes.length; i++) {
            if (checkboxes[i].checked == true) {
                event_rules_id += "," + checkboxes[i].value;
            }
            else {
            }
        }
    }
    function apply_single_rule_submit() {
        var rule_id = document.getElementById("hdn_rule_id_single_apply").value;
        getcheckeddevice();
        //alert(singledeviceids);
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_single_apply_submit?rule_id=")' + rule_id + '&deviceids=' + singledeviceids ;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                alert(data);
            }
        });
    }

    function open_multiple_event_apply() {
        getcheckedrulesid();
        document.getElementById("hdn_rule_id_multiple_apply").value = event_rules_id;
        //alert(event_rules_id);
        if (event_rules_id.length <= 0) {
            alert("Please select atleast one Event fro apply");
        }
        else {
            $('#apply_multiple_event').modal('show');

            var url1 = '@Url.Content("~/csat_settings_page/csat_event_multiply_apply_data?rule_id=")' + event_rules_id;
            $.ajax({
                type: "POST",
                url: url1,
                success: function (data) {
                    var SetEventDataDiv = $('#div_event_multiple_apply');
                    jQuery('#div_event_multiple_apply').html('');
                    var SetEventData = "<table class='table table-striped table-bordered event_datatable_multiple_apply' style='width:100%'><thead><tr><th class='col-sm-3' data-orderable='false'>Event Type</th><th class='col-sm-4' data-orderable='false'>Event ID</th><th class='col-sm-4' data-orderable='false'>Event Description</th></tr></thead><tbody>";
                    for (var i = 0; i < data.csat_event_multiple_data.length; i++) {
                        SetEventData += "<tr>";
                        SetEventData += "<td class='col-sm-3'>" + data.csat_event_multiple_data[i].e124type + "</td>";
                        SetEventData += "<td class='col-sm-4'>" + data.csat_event_multiple_data[i].e124eventid + "</td>";
                        SetEventData += "<td class='col-sm-4'>" + data.csat_event_multiple_data[i].e124description + "</td>";
                        SetEventData += "</tr >";
                    }
                    SetEventData += "</tbody></table>";
                    SetEventDataDiv.append(SetEventData);
                    $(document).ready(function () {
                        $('.event_datatable_multiple_apply').DataTable({
                            paging: false,
                            order: [],
                            columnDefs: [{ orderable: false, targets: [] }],
                            searching: false,
                            info: false,
                            responsive: false,
                        });
                        $(".table").css({ "width": "100%" });
                        $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                    });
                    var SetEventOUDataDiv = $('#drp_OU_multiple_apply');
                    jQuery('#drp_OU_multiple_apply').html('');
                    //var SetEventOUData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='Branch / Unit' id='drpOUsingleapply'>";
                    var SetEventOUData = "";
                    for (var i = 0; i < data.csat_event_multiple_oudata.length; i++) {
                        SetEventOUData += "<option value='" + data.csat_event_multiple_oudata[i].ouid + "'>" + data.csat_event_multiple_oudata[i].ouname + "</option>";
                    }
                    //SetEventOUData += "</select>";
                    SetEventOUDataDiv.append(SetEventOUData);


                    var SetEventDeviceDataDiv = $('#drp_system_multiple_apply');
                    jQuery('#drp_system_multiple_apply').html('');
                    var SetEventIPDataDiv = $('#drp_ip_multiple_apply');
                    jQuery('#drp_ip_multiple_apply').html('');
                    var SetEventDeviceDataGrid = $('#div_multiple_device_data_grid');
                    jQuery('#div_multiple_device_data_grid').html('');
                    var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable_multiple_device_grid' style='width:100%' id='div_multiple_device_data_grid'><thead><tr><th class='select' data-orderable='false'><input type='checkbox' class='parent' data-group='.group2' id='chk_device_multiple_apply' onclick='checkallitems(this,this.id)' /></th><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";

                    //var SetEventDeviceData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='System' id='drp_system_single_apply'><option value='0'>Select System</option>";
                    var SetEventDeviceData = "<option value='-1'>Select System Name</option>";
                    //var SetEventIPData = "<select class='form-control col-sm - 3 col-lg - 3 col-md - 3' name='ip' id='drp_ip_single_apply'><option value='0'>Select IP</option>";
                    var SetEventIPData = "<option value='-1'>Select IP Address</option>";
                    for (var i = 0; i < data.csat_event_multiple_device_data.length; i++) {
                        SetEventDeviceData += "<option value='" + data.csat_event_multiple_device_data[i].device_name + "'>" + data.csat_event_multiple_device_data[i].device_name + "</option>";
                        SetEventIPData += "<option value='" + data.csat_event_multiple_device_data[i].ip + "'>" + data.csat_event_multiple_device_data[i].ip + "</option>";
                        EventDeviceDataGrid += "<tr>";
                        EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' id='chk_device_multiple_apply' value='" + data.csat_event_multiple_device_data[i].device_id + "' /></td>";
                        EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_multiple_device_data[i].ou_longname + "</td>";
                        EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_multiple_device_data[i].device_name + "</td>";
                        EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_multiple_device_data[i].ip + "</td>";
                        EventDeviceDataGrid += "</tr>";
                    }
                    //SetEventDeviceData += "</select>";
                    //SetEventIPData += "</select>";
                    SetEventDeviceDataDiv.append(SetEventDeviceData);
                    SetEventIPDataDiv.append(SetEventIPData);
                    EventDeviceDataGrid += "</tbody></table>";
                    SetEventDeviceDataGrid.append(EventDeviceDataGrid);

                    $(document).ready(function () {
                        $('.event_apply_datatable_multiple_device_grid').DataTable({
                            paging: false,
                            order: [],
                            columnDefs: [{ orderable: false, targets: [] }],
                            searching: false,
                            info: false,
                            responsive: false,
                        });
                        $(".table").css({ "width": "100%" });
                        $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                    });
                }
            });
        }
    }
    $("#drp_OU_multiple_apply").change(function () {
        ouidvalue = this.value;
        var url = '@Url.Content("~/csat_report/Get_syatemname_ip?ouid=")' + this.value;
        $.ajax({
        type: "POST",
        url: url,
        success: function (data) {
            var SetDatadevice = $('#drp_system_multiple_apply');
            var SetDataip = $('#drp_ip_multiple_apply');

            jQuery('#drp_system_multiple_apply').html('');
            jQuery('#drp_ip_multiple_apply').html('');

            var devicedata = "<option value='-1'>Select System Name</option>";
            var ipdata = "<option value='-1'>Select IP Address</option>";

            for (var i = 0; i < data.systemip.length; i++) {
                devicedata+="<option value='"+ data.systemip[i].device_name +"'>"+ data.systemip[i].device_name +"</option>";
                ipdata+="<option value='"+ data.systemip[i].ip +"'>"+ data.systemip[i].ip +"</option>";
            }
            SetDatadevice.append(devicedata);
            SetDataip.append(ipdata);
            }
        });
    });
    function bind_device_multiple_apply() {
        //debugger;
        var rule_id = document.getElementById("hdn_rule_id_multiple_apply").value;
        var ou_id = document.getElementById("drp_OU_multiple_apply").value;
        var device_name = document.getElementById("drp_system_multiple_apply").value;
        var ip = document.getElementById("drp_ip_multiple_apply").value;
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_multiple_apply_data_search?ou_id=")' + ou_id + '&device_name=' + device_name + '&ip=' + ip;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDeviceDataGrid = $('#div_multiple_device_data_grid');
                jQuery('#div_multiple_device_data_grid').html('');
                var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable_multiple_device_grid' style='width:100%' id='div_multiple_device_data_grid'><thead><tr><th class='select' data-orderable='false'><input type='checkbox' class='parent' data-group='.group2' id='chk_device_multiple_apply' /></th><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_multiple_device_data.length; i++) {
                    EventDeviceDataGrid += "<tr>";
                    EventDeviceDataGrid += "<td class='select'><input type='checkbox' class='group2' name='check[]' id='chk_device_multiple_apply' value='" + data.csat_event_multiple_device_data[i].device_id + "' /></td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_multiple_device_data[i].ou_longname + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_multiple_device_data[i].device_name + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_multiple_device_data[i].ip + "</td>";
                    EventDeviceDataGrid += "</tr>";
                }
                EventDeviceDataGrid += "</tbody></table>";
                SetEventDeviceDataGrid.append(EventDeviceDataGrid);

                $(document).ready(function () {
                    $('.event_apply_datatable_multiple_device_grid').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
            }
        });
    }
    function apply_multiple_rule_submit() {
        var rule_ids = document.getElementById("hdn_rule_id_multiple_apply").value;
        getcheckeddevicemultiple();
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_multiple_apply_submit?rule_ids=")' + rule_ids + '&deviceids=' + multipledeviceids ;
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                alert(data);
            }
        });
    }
    function open_apply_on(rule_id) {
        $('#apply_on_event').modal('show');
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_apply_popup?rule_id=")' + rule_id + '&apply_type=0';
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDeviceDataGrid = $('#div_apply_on');
                jQuery('#div_apply_on').html('');
                var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable1' style='width:100%'><thead><tr><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_apply_device_data.length; i++) {
                    EventDeviceDataGrid += "<tr>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_apply_device_data[i].ou_longname + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_apply_device_data[i].device_name + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_apply_device_data[i].ip + "</td>";
                    EventDeviceDataGrid += "</tr>";
                }
                EventDeviceDataGrid += "</tbody></table>";
                SetEventDeviceDataGrid.append(EventDeviceDataGrid);
                $(document).ready(function () {
                    $('.event_apply_datatable1').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
            }
        });
    }
    function open_apply_success(rule_id) {

        $('#apply_success_event').modal('show');
        var url1 = '@Url.Content("~/csat_settings_page/csat_event_apply_popup?rule_id=")' + rule_id + '&apply_type=1';
        $.ajax({
            type: "POST",
            url: url1,
            success: function (data) {
                var SetEventDeviceDataGrid = $('#div_apply_success');
                jQuery('#div_apply_success').html('');
                var EventDeviceDataGrid = "<table class='table table-striped table-bordered event_apply_datatable2' style='width:100%'><thead><tr><th class='col-sm-4'>Branch/ Unit</th><th class='col-sm-3'>System Name</th><th class='col-sm-4'>IP Address</th></tr></thead><tbody>";
                for (var i = 0; i < data.csat_event_apply_device_data.length; i++) {
                    EventDeviceDataGrid += "<tr>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_apply_device_data[i].ou_longname + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-3'>" + data.csat_event_apply_device_data[i].device_name + "</td>";
                    EventDeviceDataGrid += "<td class='col-sm-4'>" + data.csat_event_apply_device_data[i].ip + "</td>";
                    EventDeviceDataGrid += "</tr>";
                }
                EventDeviceDataGrid += "</tbody></table>";
                SetEventDeviceDataGrid.append(EventDeviceDataGrid);

                $(document).ready(function () {
                    $('.event_apply_datatable2').DataTable({
                        paging: false,
                        order: [],
                        columnDefs: [{ orderable: false, targets: [] }],
                        searching: false,
                        info: false,
                        responsive: false,
                    });
                    $(".table").css({ "width": "100%" });
                    $(".dataTables_scrollHeadInner ").css({ "width": "100%" });
                });
            }
        });

    }

    function cleardata() {
        document.getElementById("txt_event_id_new").value = "";
        document.getElementById("txt_event_desc_new").value = "";

    }
    </script>
